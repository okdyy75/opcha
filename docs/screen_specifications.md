# 画面仕様書（実装版）

## 概要
オープンチャットサービス（opcha）のフロントエンド画面仕様

## 共通仕様

### デザイン
- **テーマ**: モダンなチャットデザイン
- **カラー**: 
  - Primary: #3b82f6（ブルー）- メインボタン・アクション
  - Secondary: #f97316（オレンジ）- セカンダリアクション  
  - Success: #22c55e（グリーン）- 成功状態・通知
- **レスポンシブ**: モバイルファースト（最大幅384px）
- **フォント**: システムフォント

### ユーザー識別
- **ニックネーム**: ユーザーが変更可能（例: `はっぴーネコ123`）
- **セッションID**: 内部管理用（フロントエンドでは非表示）
- **セッション表示名**: 変更不可能な8桁英数字識別子（例: `abc12345`）

---

## 1. トップページ（/）

### 機能
- **ルーム作成**: 新しいルームを作成
- **ルーム参加**: share_token（共有トークン）を入力してルームに参加
- **ルーム一覧リンク**: ルーム一覧ページ（/rooms）への遷移

---

## 2. ルーム一覧ページ（/rooms）

### 機能
- **ルーム一覧表示**: 参加人数・最終活動時間付き
- **ルーム作成**: モーダルでルーム名入力（50文字制限）
- **トップページへの戻る**: ヘッダーの戻るボタン

---

## 3. チャットルーム画面（/rooms/[token]）

### 機能

#### ヘッダー機能
- **戻るボタン**: ルーム一覧ページ（/rooms）に戻る
- **ルーム名表示**: ルーム名とメッセージ数を表示
- **シェアボタン**: URLをクリップボードにコピー

#### メッセージ機能
- **メッセージ表示**: チャット風の吹き出しデザイン
- **自動スクロール**: 新しいメッセージに自動スクロール
- **リアルタイム表示**: メッセージの即座反映
- **Enterキー送信**: Enterキーでメッセージ送信
- **Shift+Enter**: 改行入力対応

#### メッセージ表示形式
- **他人のメッセージ**: 左寄せ、白い吹き出し、境界線付き
- **自分のメッセージ**: 右寄せ、ブルーの吹き出し
- **ユーザー情報**: ニックネーム（太字）+ セッション表示名（薄色、#付き）
- **タイムスタンプ**: 時:分形式（24時間表記）

#### ユーザー情報機能
- **自分の情報表示**: メッセージ入力欄上部に「あなた:」として表示
- **ニックネーム変更**: 編集アイコンクリックでモーダル表示

#### メッセージ入力機能
- **自動サイズ調整**: テキストエリアの高さ自動調整（最大120px）
- **送信ボタン**: 紙飛行機アイコン（45度回転）
- **入力状態管理**: 送信中の重複防止

---

## 4. ルーム作成モーダル

### 機能
- **ルーム名入力**: 50文字制限
- **バリデーション**: 空文字チェック
- **Enterキー送信**: Enter押下で作成
- **フォーカス管理**: 自動フォーカス

---

## 5. ニックネーム設定モーダル

### 機能
- **手動入力**: 自由にニックネーム入力（20文字制限）
- **ランダム生成**: 🎲ボタンでランダムニックネーム生成
- **プレビュー**: 生成されたニックネームを確認後設定
- **バリデーション**: 空文字・文字数制限チェック

---

## 6. Toast通知

### 表示タイプ
- **成功**: グリーン色（#22c55e）- ニックネーム更新、URLコピー等
- **エラー**: 赤色（#ef4444）- エラーメッセージ
- **情報**: グレー色（#374151）- 一般的な通知

### 動作
- **表示時間**: 3秒間
- **位置**: 画面上部中央
- **アニメーション**: フェードイン・アウト

---

## 7. データ仕様

### ニックネーム生成ルール
```
形容詞 + 動物 + 数字3桁
例: はっぴーネコ123, くーるイヌ456

形容詞候補:
はっぴー, くーる, すまーと, ふれんどりー, ぶれいぶ,
きゅーと, すーぱー, ないす, ぐれーと, ふぁんたすてぃっく

動物候補:
ネコ, イヌ, ウサギ, パンダ, リス,
ハムスター, ペンギン, ライオン, ゾウ, キリン
```

### セッション表示名生成ルール
```
英数字8桁（自動生成）
例: abc12345, def67890
```

### share_token生成ルール
```
英数字6桁（小文字）
例: abc123, def456
用途: ルーム共有用の一意識別子
```

---

## 8. レスポンシブデザイン

### ブレークポイント
- **モバイル**: ~768px（メイン対象）
- **デスクトップ**: 768px~（中央配置、最大幅384px）

### 特徴
- **タッチフレンドリー**: 適切なタップターゲットサイズ
- **スクロール**: カスタムスクロールバー
- **フォーカス管理**: キーボード操作対応

---

## 9. アクセシビリティ

### 対応項目
- **WAI-ARIA準拠**: モーダル・通知・フォームで適切な属性を使用
- **キーボード操作**: Enter・Escapeキー対応
- **スクリーンリーダー対応**: 適切なラベルと説明を提供
- **基本対応**: 十分なコントラスト・セマンティックHTML
